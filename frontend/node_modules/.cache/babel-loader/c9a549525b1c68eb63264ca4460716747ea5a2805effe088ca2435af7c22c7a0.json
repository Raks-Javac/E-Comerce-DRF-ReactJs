{"ast":null,"code":"var _jsxFileName = \"/Users/kudusrufai/Desktop/codes/backend/python/e_commerce/frontend/src/contexts/CartContext.tsx\",\n  _s = $RefreshSig$(),\n  _s2 = $RefreshSig$();\nimport React, { createContext, useContext, useEffect, useReducer } from 'react';\nimport { cartService } from '../services/cart';\nimport { useAuth } from './AuthContext';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst initialState = {\n  cart: null,\n  loading: false\n};\nconst cartReducer = (state, action) => {\n  switch (action.type) {\n    case 'SET_LOADING':\n      return {\n        ...state,\n        loading: action.payload\n      };\n    case 'SET_CART':\n      return {\n        ...state,\n        cart: action.payload,\n        loading: false\n      };\n    case 'CLEAR_CART':\n      return {\n        ...state,\n        cart: null,\n        loading: false\n      };\n    default:\n      return state;\n  }\n};\nconst CartContext = /*#__PURE__*/createContext(undefined);\nexport const useCart = () => {\n  _s();\n  const context = useContext(CartContext);\n  if (context === undefined) {\n    throw new Error('useCart must be used within a CartProvider');\n  }\n  return context;\n};\n_s(useCart, \"b9L3QQ+jgeyIrH0NfHrJ8nn7VMU=\");\nexport const CartProvider = ({\n  children\n}) => {\n  _s2();\n  const [state, dispatch] = useReducer(cartReducer, initialState);\n  const {\n    isAuthenticated\n  } = useAuth();\n  const refreshCart = async () => {\n    if (isAuthenticated) {\n      try {\n        dispatch({\n          type: 'SET_LOADING',\n          payload: true\n        });\n        const cart = await cartService.getCart();\n        dispatch({\n          type: 'SET_CART',\n          payload: cart\n        });\n      } catch (error) {\n        console.error('Error fetching cart:', error);\n        dispatch({\n          type: 'CLEAR_CART'\n        });\n      }\n    } else {\n      dispatch({\n        type: 'CLEAR_CART'\n      });\n    }\n  };\n  useEffect(() => {\n    refreshCart();\n  }, [isAuthenticated, refreshCart]);\n  const addToCart = async (productId, quantity = 1) => {\n    try {\n      const response = await cartService.addToCart(productId, quantity);\n      dispatch({\n        type: 'SET_CART',\n        payload: response.cart\n      });\n    } catch (error) {\n      throw error;\n    }\n  };\n  const updateCartItem = async (itemId, quantity) => {\n    try {\n      const response = await cartService.updateCartItem(itemId, quantity);\n      dispatch({\n        type: 'SET_CART',\n        payload: response.cart\n      });\n    } catch (error) {\n      throw error;\n    }\n  };\n  const removeFromCart = async itemId => {\n    try {\n      const response = await cartService.removeFromCart(itemId);\n      dispatch({\n        type: 'SET_CART',\n        payload: response.cart\n      });\n    } catch (error) {\n      throw error;\n    }\n  };\n  const clearCart = async () => {\n    try {\n      const response = await cartService.clearCart();\n      dispatch({\n        type: 'SET_CART',\n        payload: response.cart\n      });\n    } catch (error) {\n      throw error;\n    }\n  };\n  const value = {\n    ...state,\n    addToCart,\n    updateCartItem,\n    removeFromCart,\n    clearCart,\n    refreshCart\n  };\n  return /*#__PURE__*/_jsxDEV(CartContext.Provider, {\n    value: value,\n    children: children\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 124,\n    columnNumber: 12\n  }, this);\n};\n_s2(CartProvider, \"0ubePo8JPl0+mzcUJoiBpiDGTUo=\", false, function () {\n  return [useAuth];\n});\n_c = CartProvider;\nvar _c;\n$RefreshReg$(_c, \"CartProvider\");","map":{"version":3,"names":["React","createContext","useContext","useEffect","useReducer","cartService","useAuth","jsxDEV","_jsxDEV","initialState","cart","loading","cartReducer","state","action","type","payload","CartContext","undefined","useCart","_s","context","Error","CartProvider","children","_s2","dispatch","isAuthenticated","refreshCart","getCart","error","console","addToCart","productId","quantity","response","updateCartItem","itemId","removeFromCart","clearCart","value","Provider","fileName","_jsxFileName","lineNumber","columnNumber","_c","$RefreshReg$"],"sources":["/Users/kudusrufai/Desktop/codes/backend/python/e_commerce/frontend/src/contexts/CartContext.tsx"],"sourcesContent":["import React, { createContext, useContext, useEffect, useReducer } from 'react';\nimport { cartService } from '../services/cart';\nimport { Cart } from '../types';\nimport { useAuth } from './AuthContext';\n\ninterface CartState {\n    cart: Cart | null;\n    loading: boolean;\n}\n\ninterface CartContextType extends CartState {\n    addToCart: (productId: number, quantity?: number) => Promise<void>;\n    updateCartItem: (itemId: number, quantity: number) => Promise<void>;\n    removeFromCart: (itemId: number) => Promise<void>;\n    clearCart: () => Promise<void>;\n    refreshCart: () => Promise<void>;\n}\n\ntype CartAction =\n    | { type: 'SET_LOADING'; payload: boolean }\n    | { type: 'SET_CART'; payload: Cart }\n    | { type: 'CLEAR_CART' };\n\nconst initialState: CartState = {\n    cart: null,\n    loading: false,\n};\n\nconst cartReducer = (state: CartState, action: CartAction): CartState => {\n    switch (action.type) {\n        case 'SET_LOADING':\n            return { ...state, loading: action.payload };\n        case 'SET_CART':\n            return { ...state, cart: action.payload, loading: false };\n        case 'CLEAR_CART':\n            return { ...state, cart: null, loading: false };\n        default:\n            return state;\n    }\n};\n\nconst CartContext = createContext<CartContextType | undefined>(undefined);\n\nexport const useCart = () => {\n    const context = useContext(CartContext);\n    if (context === undefined) {\n        throw new Error('useCart must be used within a CartProvider');\n    }\n    return context;\n};\n\ninterface CartProviderProps {\n    children: React.ReactNode;\n}\n\nexport const CartProvider: React.FC<CartProviderProps> = ({ children }) => {\n    const [state, dispatch] = useReducer(cartReducer, initialState);\n    const { isAuthenticated } = useAuth();\n\n    const refreshCart = async () => {\n        if (isAuthenticated) {\n            try {\n                dispatch({ type: 'SET_LOADING', payload: true });\n                const cart = await cartService.getCart();\n                dispatch({ type: 'SET_CART', payload: cart });\n            } catch (error) {\n                console.error('Error fetching cart:', error);\n                dispatch({ type: 'CLEAR_CART' });\n            }\n        } else {\n            dispatch({ type: 'CLEAR_CART' });\n        }\n    };\n\n    useEffect(() => {\n        refreshCart();\n    }, [isAuthenticated, refreshCart]);\n\n    const addToCart = async (productId: number, quantity: number = 1) => {\n        try {\n            const response = await cartService.addToCart(productId, quantity);\n            dispatch({ type: 'SET_CART', payload: response.cart });\n        } catch (error) {\n            throw error;\n        }\n    };\n\n    const updateCartItem = async (itemId: number, quantity: number) => {\n        try {\n            const response = await cartService.updateCartItem(itemId, quantity);\n            dispatch({ type: 'SET_CART', payload: response.cart });\n        } catch (error) {\n            throw error;\n        }\n    };\n\n    const removeFromCart = async (itemId: number) => {\n        try {\n            const response = await cartService.removeFromCart(itemId);\n            dispatch({ type: 'SET_CART', payload: response.cart });\n        } catch (error) {\n            throw error;\n        }\n    };\n\n    const clearCart = async () => {\n        try {\n            const response = await cartService.clearCart();\n            dispatch({ type: 'SET_CART', payload: response.cart });\n        } catch (error) {\n            throw error;\n        }\n    };\n\n    const value: CartContextType = {\n        ...state,\n        addToCart,\n        updateCartItem,\n        removeFromCart,\n        clearCart,\n        refreshCart,\n    };\n\n    return <CartContext.Provider value={value}>{children}</CartContext.Provider>;\n};\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}
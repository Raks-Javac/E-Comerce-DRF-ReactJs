{"ast":null,"code":"import React from'react';import{Link}from'react-router-dom';import{useAuth}from'../contexts/AuthContext';import{useCart}from'../contexts/CartContext';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const ProductCard=_ref=>{let{product}=_ref;const{addToCart}=useCart();const{isAuthenticated}=useAuth();const handleAddToCart=async e=>{e.preventDefault();e.stopPropagation();if(!isAuthenticated){alert('Please login to add items to cart');return;}try{await addToCart(product.id);alert('Product added to cart!');}catch(error){console.error('Error adding to cart:',error);alert('Error adding product to cart');}};const renderStars=rating=>{const stars=[];const fullStars=Math.floor(rating);const hasHalfStar=rating%1!==0;for(let i=0;i<5;i++){if(i<fullStars){stars.push(/*#__PURE__*/_jsx(\"svg\",{className:\"w-4 h-4 fill-current text-yellow-500\",viewBox:\"0 0 20 20\",children:/*#__PURE__*/_jsx(\"path\",{d:\"M10 15l-5.878 3.09 1.123-6.545L.489 6.91l6.572-.955L10 0l2.939 5.955 6.572.955-4.756 4.635 1.123 6.545z\"})},i));}else if(i===fullStars&&hasHalfStar){stars.push(/*#__PURE__*/_jsxs(\"svg\",{className:\"w-4 h-4 fill-current text-yellow-500\",viewBox:\"0 0 20 20\",children:[/*#__PURE__*/_jsx(\"defs\",{children:/*#__PURE__*/_jsxs(\"linearGradient\",{id:\"half-fill\",children:[/*#__PURE__*/_jsx(\"stop\",{offset:\"50%\",stopColor:\"currentColor\"}),/*#__PURE__*/_jsx(\"stop\",{offset:\"50%\",stopColor:\"transparent\"})]})}),/*#__PURE__*/_jsx(\"path\",{fill:\"url(#half-fill)\",d:\"M10 15l-5.878 3.09 1.123-6.545L.489 6.91l6.572-.955L10 0l2.939 5.955 6.572.955-4.756 4.635 1.123 6.545z\"})]},i));}else{stars.push(/*#__PURE__*/_jsx(\"svg\",{className:\"w-4 h-4 fill-current text-gray-300\",viewBox:\"0 0 20 20\",children:/*#__PURE__*/_jsx(\"path\",{d:\"M10 15l-5.878 3.09 1.123-6.545L.489 6.91l6.572-.955L10 0l2.939 5.955 6.572.955-4.756 4.635 1.123 6.545z\"})},i));}}return stars;};return/*#__PURE__*/_jsx(Link,{to:\"/products/\".concat(product.id),className:\"group\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white rounded-lg shadow-md overflow-hidden hover:shadow-lg transition-shadow duration-300\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"relative\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"aspect-w-1 aspect-h-1 w-full h-64 bg-gray-200\",children:product.image?/*#__PURE__*/_jsx(\"img\",{src:product.image,alt:product.name,className:\"w-full h-full object-cover group-hover:scale-105 transition-transform duration-300\"}):/*#__PURE__*/_jsx(\"div\",{className:\"flex items-center justify-center h-full\",children:/*#__PURE__*/_jsx(\"svg\",{className:\"w-16 h-16 text-gray-400\",fill:\"none\",stroke:\"currentColor\",viewBox:\"0 0 24 24\",children:/*#__PURE__*/_jsx(\"path\",{strokeLinecap:\"round\",strokeLinejoin:\"round\",strokeWidth:2,d:\"M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z\"})})})}),!product.is_in_stock&&/*#__PURE__*/_jsx(\"div\",{className:\"absolute top-2 right-2 bg-red-500 text-white px-2 py-1 rounded text-sm\",children:\"Out of Stock\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"p-4\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"text-lg font-semibold text-gray-900 mb-2 group-hover:text-primary-600 transition-colors\",children:product.name}),/*#__PURE__*/_jsx(\"p\",{className:\"text-sm text-gray-600 mb-2\",children:product.category_name}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center mb-2\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"flex items-center\",children:renderStars(product.average_rating)}),/*#__PURE__*/_jsxs(\"span\",{className:\"ml-2 text-sm text-gray-600\",children:[\"(\",product.review_count,\" reviews)\"]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center justify-between\",children:[/*#__PURE__*/_jsxs(\"span\",{className:\"text-xl font-bold text-primary-600\",children:[\"$\",product.price]}),product.is_in_stock&&/*#__PURE__*/_jsx(\"button\",{onClick:handleAddToCart,className:\"bg-primary-600 text-white px-4 py-2 rounded-md hover:bg-primary-700 transition-colors text-sm font-medium\",children:\"Add to Cart\"})]})]})]})});};export default ProductCard;","map":{"version":3,"names":["React","Link","useAuth","useCart","jsx","_jsx","jsxs","_jsxs","ProductCard","_ref","product","addToCart","isAuthenticated","handleAddToCart","e","preventDefault","stopPropagation","alert","id","error","console","renderStars","rating","stars","fullStars","Math","floor","hasHalfStar","i","push","className","viewBox","children","d","offset","stopColor","fill","to","concat","image","src","alt","name","stroke","strokeLinecap","strokeLinejoin","strokeWidth","is_in_stock","category_name","average_rating","review_count","price","onClick"],"sources":["/Users/kudusrufai/Desktop/codes/backend/python/e_commerce/frontend/src/components/ProductCard.tsx"],"sourcesContent":["import React from 'react';\nimport { Link } from 'react-router-dom';\nimport { useAuth } from '../contexts/AuthContext';\nimport { useCart } from '../contexts/CartContext';\nimport { Product } from '../types';\n\ninterface ProductCardProps {\n    product: Product;\n}\n\nconst ProductCard: React.FC<ProductCardProps> = ({ product }) => {\n    const { addToCart } = useCart();\n    const { isAuthenticated } = useAuth();\n\n    const handleAddToCart = async (e: React.MouseEvent) => {\n        e.preventDefault();\n        e.stopPropagation();\n\n        if (!isAuthenticated) {\n            alert('Please login to add items to cart');\n            return;\n        }\n\n        try {\n            await addToCart(product.id);\n            alert('Product added to cart!');\n        } catch (error) {\n            console.error('Error adding to cart:', error);\n            alert('Error adding product to cart');\n        }\n    };\n\n    const renderStars = (rating: number) => {\n        const stars = [];\n        const fullStars = Math.floor(rating);\n        const hasHalfStar = rating % 1 !== 0;\n\n        for (let i = 0; i < 5; i++) {\n            if (i < fullStars) {\n                stars.push(\n                    <svg key={i} className=\"w-4 h-4 fill-current text-yellow-500\" viewBox=\"0 0 20 20\">\n                        <path d=\"M10 15l-5.878 3.09 1.123-6.545L.489 6.91l6.572-.955L10 0l2.939 5.955 6.572.955-4.756 4.635 1.123 6.545z\" />\n                    </svg>\n                );\n            } else if (i === fullStars && hasHalfStar) {\n                stars.push(\n                    <svg key={i} className=\"w-4 h-4 fill-current text-yellow-500\" viewBox=\"0 0 20 20\">\n                        <defs>\n                            <linearGradient id=\"half-fill\">\n                                <stop offset=\"50%\" stopColor=\"currentColor\" />\n                                <stop offset=\"50%\" stopColor=\"transparent\" />\n                            </linearGradient>\n                        </defs>\n                        <path fill=\"url(#half-fill)\" d=\"M10 15l-5.878 3.09 1.123-6.545L.489 6.91l6.572-.955L10 0l2.939 5.955 6.572.955-4.756 4.635 1.123 6.545z\" />\n                    </svg>\n                );\n            } else {\n                stars.push(\n                    <svg key={i} className=\"w-4 h-4 fill-current text-gray-300\" viewBox=\"0 0 20 20\">\n                        <path d=\"M10 15l-5.878 3.09 1.123-6.545L.489 6.91l6.572-.955L10 0l2.939 5.955 6.572.955-4.756 4.635 1.123 6.545z\" />\n                    </svg>\n                );\n            }\n        }\n        return stars;\n    };\n\n    return (\n        <Link to={`/products/${product.id}`} className=\"group\">\n            <div className=\"bg-white rounded-lg shadow-md overflow-hidden hover:shadow-lg transition-shadow duration-300\">\n                <div className=\"relative\">\n                    <div className=\"aspect-w-1 aspect-h-1 w-full h-64 bg-gray-200\">\n                        {product.image ? (\n                            <img\n                                src={product.image}\n                                alt={product.name}\n                                className=\"w-full h-full object-cover group-hover:scale-105 transition-transform duration-300\"\n                            />\n                        ) : (\n                            <div className=\"flex items-center justify-center h-full\">\n                                <svg className=\"w-16 h-16 text-gray-400\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                                    <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z\" />\n                                </svg>\n                            </div>\n                        )}\n                    </div>\n\n                    {!product.is_in_stock && (\n                        <div className=\"absolute top-2 right-2 bg-red-500 text-white px-2 py-1 rounded text-sm\">\n                            Out of Stock\n                        </div>\n                    )}\n                </div>\n\n                <div className=\"p-4\">\n                    <h3 className=\"text-lg font-semibold text-gray-900 mb-2 group-hover:text-primary-600 transition-colors\">\n                        {product.name}\n                    </h3>\n\n                    <p className=\"text-sm text-gray-600 mb-2\">{product.category_name}</p>\n\n                    <div className=\"flex items-center mb-2\">\n                        <div className=\"flex items-center\">\n                            {renderStars(product.average_rating)}\n                        </div>\n                        <span className=\"ml-2 text-sm text-gray-600\">\n                            ({product.review_count} reviews)\n                        </span>\n                    </div>\n\n                    <div className=\"flex items-center justify-between\">\n                        <span className=\"text-xl font-bold text-primary-600\">\n                            ${product.price}\n                        </span>\n\n                        {product.is_in_stock && (\n                            <button\n                                onClick={handleAddToCart}\n                                className=\"bg-primary-600 text-white px-4 py-2 rounded-md hover:bg-primary-700 transition-colors text-sm font-medium\"\n                            >\n                                Add to Cart\n                            </button>\n                        )}\n                    </div>\n                </div>\n            </div>\n        </Link>\n    );\n};\n\nexport default ProductCard;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}